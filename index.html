<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>DuraHaus — Painting and Construction</title>
  <meta name="description" content="Interior & exterior painting, cabinets, stain, concrete coatings, drywall and sealing. Clean, on-time, built to perform.">
  <link rel="preload" as="image" href="/assets/stock-hero.webp">

  <!-- (light SEO polish) -->
  <link rel="canonical" href="./index.html">
  <meta name="theme-color" content="#0a0a0a" media="(prefers-color-scheme: dark)">
  <meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)">
  <meta property="og:type" content="website">
  <meta property="og:title" content="DuraHaus — Painting and Construction">
  <meta property="og:description" content="Professional painting. Clean, on-time. Protecting what’s built.">
  <meta property="og:image" content="/assets/stock-hero.webp">
  <meta property="og:url" content="./index.html">
  <meta name="twitter:card" content="summary_large_image">

  <style>
    :root{
      --bg:#0a0a0a; --panel:#101010; --ink:#ffffff; --muted:#bdbdbd;
      --line:#1a1a1a; --max:1120px; --r:14px; --gap:28px;
      --brand:#ffffff;
      --focus:2px dotted #8bb6ff;
    }
    /* Light theme when toggled */
    :root[data-theme="light"]{
      --bg:#f7f7f9; --panel:#ffffff; --ink:#0b0d10; --muted:#606772;
      --line:#e7eaf0; --brand:#111823; --focus:2px dotted #1a73e8;
    }

    *{box-sizing:border-box} html,body{height:100%}
    body{margin:0;background:var(--bg);color:var(--ink);
      font:16px/1.55 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;
      -webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;}
    a{color:inherit;text-decoration:none}
    img{display:block;width:100%;height:auto;background:#0d0d0d}
    .brand img{background:transparent!important}
    .container{max-width:var(--max);margin:0 auto;padding:0 20px}
    :focus-visible{outline:var(--focus);outline-offset:2px;border-radius:10px}

    /* Header */
    header{position:sticky;top:0;z-index:50;background:rgba(10,10,10,.92);
      backdrop-filter:saturate(140%) blur(8px);border-bottom:1px solid var(--line)}
    :root[data-theme="light"] header{background:rgba(250,250,252,.85)}
    .nav{display:flex;align-items:center;justify-content:space-between;gap:18px;padding:12px 0}
    .brand{display:flex;align-items:center;gap:14px;min-width:0}
    .brand picture{display:block;line-height:0}
    .brand img{height:56px;width:auto;display:block}
    /* Light mode logo inversion (quick fix) */
    :root[data-theme="light"] .brand img{ filter: invert(1) grayscale(1) brightness(0); }
    .brand .wordmark{font-weight:800;letter-spacing:.03em;white-space:nowrap}

    .navlinks{display:flex;gap:12px;align-items:center;flex-wrap:wrap;margin-left:20px}
    .pill{padding:.5rem .8rem;border:1px solid var(--line);border-radius:999px;font-size:14px}
    .pill--solid{background:var(--brand);color:var(--bg);border-color:var(--brand);font-weight:700}
    .pill--ghost{background:transparent}
    .iconbtn{display:inline-flex;align-items:center;justify-content:center;width:40px;height:40px;border:1px solid var(--line);border-radius:999px}
    .iconbtn svg{width:18px;height:18px;fill:currentColor}
    .toggle{padding:.5rem .8rem;border:1px solid var(--line);border-radius:999px;background:transparent}

    @media (max-width:600px){
      .nav{padding:10px 0}
      .brand img{height:44px}
      .pill{font-size:13px;padding:.45rem .7rem}
      .iconbtn{width:38px;height:38px}
    }

    /* Hero */
    .hero{display:grid;grid-template-columns:1fr;background:#0c0c0c;border-bottom:1px solid var(--line)}
    :root[data-theme="light"] .hero{background:#ffffff}
    .hero__media{position:relative;aspect-ratio:16/9;max-height:70vh;overflow:hidden}
    .hero__media img{width:100%;height:100%;object-fit:cover;opacity:.95;}
    .hero__copy{padding:3rem 0}
    h1{margin:0 0 .6rem;font-size:clamp(32px,5.2vw,56px);line-height:1.05;letter-spacing:-.01em}
    h2{margin:0 0 .6rem;font-size:clamp(22px,2.2vw,28px)}
    .lead{color:var(--muted);font-size:clamp(16px,1.8vw,19px)}
    .row{display:grid;grid-template-columns:1fr;gap:var(--gap);margin:3rem 0}
    @media (min-width:860px){
      .hero{grid-template-columns:1.05fr .95fr}
      .hero__copy{padding:4.2rem 0 4rem 2rem}
      .row{grid-template-columns:1.05fr .95fr;align-items:center}
    }

    /* Cards / grids */
    .card{background:var(--panel);border:1px solid var(--line);border-radius:var(--r);overflow:hidden}
    .card .pad{padding:1.1rem}
    p{margin:.25rem 0 0}
    .grid{display:grid;gap:var(--gap);grid-template-columns:1fr}
    @media (min-width:900px){.grid--3{grid-template-columns:repeat(3,1fr)}}
    @media (min-width:960px){.grid--4{grid-template-columns:repeat(4,1fr)}}

    /* Why */
    .why{margin:3rem auto 0}
    .why .cols{display:grid;gap:var(--gap)}
    @media (min-width:900px){.why .cols{grid-template-columns:repeat(4,1fr)}}
    .why .tile{border:1px solid var(--line);border-radius:var(--r);padding:1.2rem;background:var(--panel)}
    .why h3{margin:.1rem 0 .4rem;font-size:1.1rem}

    /* FAQ */
    .faq{margin:3rem auto}
    .faq details{border:1px solid var(--line);border-radius:12px;padding:.9rem 1.1rem;background:var(--panel)}
    .faq details+details{margin-top:12px}
    .faq summary{cursor:pointer;list-style:none;font-weight:700}
    .faq summary::-webkit-details-marker{display:none}
    .faq .a{color:var(--muted);margin:.6rem 0 0}

    /* CTA band */
    .band{display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between;padding:1.2rem;border:1px solid var(--line);border-radius:var(--r);background:var(--panel)}

    /* Pre-footer (stamp + mini nav) */
    .prefooter{margin:3rem auto 1.5rem;display:flex;gap:22px;align-items:center;justify-content:space-between;flex-wrap:wrap}
    .prefooter .stampwrap{display:flex;align-items:center;gap:14px}
    .prefooter img{width:128px;height:auto;opacity:.95;filter:invert(1) brightness(1.6);background:transparent}
    .prefooter .menu{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
    @media (max-width:720px){
      .prefooter{justify-content:center;text-align:center}
      .prefooter .menu{justify-content:center}
    }

    /* Footer */
    footer{border-top:1px solid var(--line);margin-top:2rem}
    .foot{display:grid;gap:18px;align-items:center;padding:1.2rem 0;grid-template-columns:1fr}
    small{color:var(--muted)}

    /* Contact strip (above footer) */
    .contactbar{border-top:1px solid var(--line);border-bottom:1px solid var(--line);background:#0e0e10}
    :root[data-theme="light"] .contactbar{background:#f0f2f6}
    .contactbar .row{display:flex;gap:16px;align-items:center;justify-content:flex-start;flex-wrap:wrap;margin:0;padding:14px 0}
    .contactbar a{display:inline-flex;align-items:center;gap:8px;color:#d9d9db;font-size:15px}
    :root[data-theme="light"] .contactbar a{color:#1b1f28}
    .contactbar a:hover{color:#fff}
    :root[data-theme="light"] .contactbar a:hover{color:#000}
    .contactbar svg{width:20px;height:20px;fill:currentColor}

    /* Before/After slider */
    .ba{position:relative;border:1px solid var(--line);border-radius:12px;overflow:hidden;background:#0e0e10}
    .ba img{width:100%}
    .ba .after{position:absolute;inset:0;overflow:hidden}
    .ba .after img{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;clip-path:inset(0 0 0 50%)}
    .ba input[type=range]{position:absolute;inset:0;opacity:0}
    .ba .handle{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:44px;height:44px;border-radius:50%;display:grid;place-items:center;background:var(--panel);border:1px solid var(--line)}

    /* === Color Studio: Smart Select === */
    .colorai .pad{display:grid;gap:14px}
    .cai-toolbar{display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between;gap:10px}
    .cai-left,.cai-mid,.cai-right{display:flex;flex-wrap:wrap;gap:10px;align-items:center}
    .cai-file{display:flex;align-items:center;gap:8px;border:1px solid var(--line);border-radius:10px;padding:.5rem .7rem;background:var(--panel)}
    .cai-file input[type=file]{max-width:220px}
    .cai-mode{display:flex;gap:8px}
    .cai-tab{border:1px solid var(--line);background:var(--panel);color:var(--ink);padding:.5rem .8rem;border-radius:999px;cursor:pointer}
    .cai-tab.is-active{background:var(--brand);color:var(--bg);border-color:var(--brand);font-weight:700}
    .cai-range,label{display:flex;align-items:center;gap:8px;border:1px solid var(--line);border-radius:10px;padding:.4rem .6rem;background:var(--panel)}
    .cai-range input[type=range]{width:140px}
    .cai-stage{position:relative;border:1px solid var(--line);border-radius:12px;overflow:hidden;background:#0e0e10}
    .cai-view{display:block;width:100%;height:auto}
    .cai-tip{position:absolute;bottom:10px;left:10px;background:rgba(0,0,0,.55);color:#fff;padding:.35rem .55rem;border-radius:8px;font-size:.85rem}
    :root[data-theme="light"] .cai-tip{background:rgba(0,0,0,.35)}
    .cai-controls{display:grid;gap:8px}
    .cai-row{display:flex;gap:8px;align-items:center;flex-wrap:wrap;border:1px solid var(--line);border-radius:10px;padding:.55rem .7rem;background:var(--panel)}
    .cai-row strong{min-width:160px}
    .cai-row input[type=color]{width:34px;height:34px;border:none;background:transparent;padding:0}
    .cai-row input[type=range]{width:160px}
    .cai-swatches{display:flex;gap:6px}
    .cai-swatch{width:22px;height:22px;border-radius:6px;border:1px solid var(--line);cursor:pointer}
  </style>
</head>
<body>

  <!-- Header -->
  <header>
    <div class="container nav">
      <a class="brand" href="/" aria-label="DuraHaus home">
        <picture>
          <source srcset="/assets/durahaus-logo.svg" type="image/svg+xml">
          <source srcset="/assets/durahaus-logo.png" type="image/png">
          <img src="/assets/durahaus-logo.jpg" alt="DuraHaus logo"
               onerror="this.closest('.brand').querySelector('.wordmark').style.display='block'">
        </picture>
        <span class="wordmark" style="display:none">DURAHAUS</span>
      </a>

      <nav class="navlinks" aria-label="Primary">
        <a href="/services.html" class="pill">Services</a>
        <a href="/projects.html" class="pill">Projects</a>
        <a href="/about.html" class="pill">About</a>
        <a class="iconbtn" href="tel:15136684382" aria-label="Call DuraHaus">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M6.6 10.2c1.2 2.4 3.1 4.3 5.5 5.5l1.8-1.8c.3-.3.7-.4 1.1-.3 1 .3 2 .5 3 .5.6 0 1 .4 1 1v3.1c0 .6-.4 1-1 1C10.3 19.2 4.8 13.7 4.8 6.1c0-.6.4-1 1-1H9c.6 0 1 .4 1 1 0 1 .2 2 .5 3 .1.4 0 .8-.3 1.1l-1.6 2z"/></svg>
        </a>
        <a class="pill pill--solid" href="/quote.html">Get a Quote</a>
        <button id="themeBtn" class="toggle" type="button" aria-label="Toggle theme">🌙</button>
      </nav>
    </div>
  </header>

  <main>
    <!-- Hero -->
    <section class="hero">
      <div class="hero__media">
        <img src="/assets/stock-hero.webp" alt="Cincinnati high-end home exterior">
      </div>
      <div class="hero__copy container">
        <h1>Professional Painting. Clean, On-Time.<br>Protecting What’s Built.</h1>
        <p class="lead">
          From interiors to exteriors, cabinets to concrete — we approach every job with care, craftsmanship, and materials built to perform. All to make your home more beautiful, more durable, and better protected against time and weather.
        </p>
        <div class="stack" style="margin-top:1.1rem">
          <a class="pill pill--solid" href="/services.html">Explore Services</a>
        </div>
      </div>
    </section>

    <!-- Mission -->
    <section class="container row">
      <div class="card">
        <img src="/assets/stock-exterior.webp" alt="Exterior detail">
      </div>
      <div>
        <h2>Protecting What’s Built. <br>Enhancing What’s Seen.</h2>
        <p class="lead">
          At DuraHaus that is our mission. We supply customers with specialized skills and knowledge in Interior/Exterior Painting, Cabinetry Finishes, Staining & Wood Finishes, Surface-Protecting Coatings, Concrete Coatings, Drywall Repair, Interior/Exterior Sealing and more.
        </p>
        <div class="stack" style="margin-top:1rem">
          <a class="pill pill--solid" href="/about.html">About</a>
          <a class="pill pill--ghost" href="tel:15136684382">Call Us</a>
        </div>
      </div>
    </section>

    <!-- WHY CHOOSE (between Mission → What We Do) -->
    <section class="container why" aria-labelledby="why">
      <h2 id="why">Why homeowners choose DuraHaus</h2>
      <div class="cols">
        <div class="tile"><strong>Prep-first approach.</strong><br><span class="muted">Repairs, sanding, and primers matched to each surface.</span></div>
        <div class="tile"><strong>On-time scheduling.</strong><br><span class="muted">Clear start dates, daily updates, and predictable finish.</span></div>
        <div class="tile"><strong>Professional site protection.</strong><br><span class="muted">Floor and fixture protection with daily cleanup.</span></div>
        <div class="tile"><strong>Written workmanship warranty.</strong><br><span class="muted">Included with every project.</span></div>
      </div>
    </section>

    <!-- What we do -->
    <section class="container" style="margin-top:2rem">
      <h2>What we do</h2>
      <div class="grid grid--4">
        <article class="card"><img src="/assets/stock-interior.webp" alt="Interior painting"><div class="pad"><h3 style="margin:0 0 .25rem">Interior Painting</h3><p>Walls, ceilings, trim, doors.</p></div></article>
        <article class="card"><img src="/assets/stock-exterior.webp" alt="Exterior painting"><div class="pad"><h3 style="margin:0 0 .25rem">Exterior Painting</h3><p>Siding, brick, trim.</p></div></article>
        <article class="card"><img src="/assets/stock-cabinets.webp" alt="Cabinet refinishing"><div class="pad"><h3 style="margin:0 0 .25rem">Cabinet Refinishing</h3><p>Factory-smooth enamels.</p></div></article>
        <article class="card"><img src="/assets/stock-concrete.webp" alt="Concrete coatings"><div class="pad"><h3 style="margin:0 0 .25rem">Concrete Coatings</h3><p>Garages, patios, basements.</p></div></article>
        <article class="card"><img src="/assets/stock-drywall.webp" alt="Drywall repair"><div class="pad"><h3 style="margin:0 0 .25rem">Drywall & Repair</h3><p>Patching & resurfacing.</p></div></article>
        <article class="card"><img src="/assets/stock-stain.webp" alt="Staining & wood care"><div class="pad"><h3 style="margin:0 0 .25rem">Stain & Wood Care</h3><p>Decks, doors, rails.</p></div></article>
        <article class="card"><img src="/assets/stock-caulking.webp" alt="Caulking & sealants"><div class="pad"><h3 style="margin:0 0 .25rem">Caulking & Sealants</h3><p>Weatherproof, clean lines.</p></div></article>
        <article class="card"><img src="/assets/stock-metal.webp" alt="Metal painting"><div class="pad"><h3 style="margin:0 0 .25rem">Metal Painting</h3><p>Rails, doors, equipment.</p></div></article>
        <article class="card"><img src="/assets/stock-waterproof.webp" alt="Waterproof coatings"><div class="pad"><h3 style="margin:0 0 .25rem">Waterproof Coatings</h3><p>Protective membranes & sealers.</p></div></article>
      </div>
    </section>

    <!-- Our work speaks for itself (BA under What We Do) -->
    <section class="container" style="margin-top:2rem">
      <h2>Our work speaks for itself</h2>
      <div class="ba" id="ba1">
        <img src="/assets/stock-interior.webp" alt="Before">
        <div class="after"><img src="/assets/stock-exterior.webp" alt="After"></div>
        <div class="handle">↔</div>
        <input type="range" min="0" max="100" value="50" aria-label="Reveal after image">
      </div>
    </section>

    <!-- Color Studio (Smart Select, no pre-made masks) -->
    <section class="container" style="margin-top:2rem">
      <h2>Preview a color in your space</h2>

      <div class="card colorai">
        <div class="pad">
          <div class="cai-toolbar">
            <div class="cai-left">
              <label class="cai-file">Use your photo
                <input type="file" id="caiUpload" accept="image/*">
              </label>
              <div class="cai-mode" role="tablist" aria-label="Mode">
                <button class="cai-tab is-active" data-mode="interior" role="tab" aria-selected="true">Interior</button>
                <button class="cai-tab" data-mode="exterior" role="tab" aria-selected="false">Exterior</button>
              </div>
            </div>

            <div class="cai-mid">
              <label>Surface
                <select id="caiSurface">
                  <option value="walls">Walls</option>
                  <option value="ceiling">Ceiling</option>
                  <option value="trim">Trim</option>
                  <option value="cabinets">Cabinets</option>
                  <option value="siding">Siding</option>
                  <option value="fascia">Fascia/Soffits/Gables</option>
                  <option value="doors">Doors</option>
                </select>
              </label>
              <label>Tolerance
                <input type="range" id="caiTol" min="5" max="60" value="25">
              </label>
              <label>Feather
                <input type="range" id="caiFeather" min="0" max="8" value="2">
              </label>
            </div>

            <div class="cai-right">
              <button class="pill" id="caiAdd" aria-pressed="true" title="Add selection (A)">Add</button>
              <button class="pill" id="caiSubtract" aria-pressed="false" title="Subtract selection (S)">Subtract</button>
              <button class="pill" id="caiUndo" title="Undo (Z)">Undo</button>
              <label class="cai-range">Overlay
                <input type="range" id="caiGlobalStrength" min="25" max="100" value="70">
              </label>
            </div>
          </div>

          <div class="cai-stage">
            <canvas id="caiView" class="cai-view" aria-label="Color studio canvas"></canvas>
            <div class="cai-tip">Click the area you want to recolor. Hold <kbd>S</kbd> or toggle “Subtract” to remove parts.</div>
          </div>

          <div id="caiControls" class="cai-controls"></div>

          <small class="muted">Visualization only — actual results vary by lighting, sheen, and device.</small>
        </div>
      </div>
    </section>

    <!-- FAQ -->
    <section class="container faq">
      <h2 style="margin-bottom:.6rem">FAQs</h2>
      <details><summary>Do you offer free estimates?</summary>
        <div class="a">Yes. We can visit on-site within 48 hours in most cases and provide a written, itemized quote.</div>
      </details>
      <details><summary>How soon can you start?</summary>
        <div class="a">Scheduling depends on scope and season. Smaller interior projects can often begin within 1–2 weeks.</div>
      </details>
      <details><summary>What materials do you use?</summary>
        <div class="a">We spec pro-grade primers, enamels, and exterior coatings matched to each substrate for durability and finish quality.</div>
      </details>
      <details><summary>Are you insured and do you provide a warranty?</summary>
        <div class="a">Yes—fully insured. We include a workmanship warranty with every project. Details are listed on your written quote.</div>
      </details>
    </section>

    <!-- CTA band -->
    <section class="container" style="margin:3rem auto 2rem">
      <div class="band">
        <div>
          <h2 style="margin:.2rem 0">Ready to start?</h2>
          <p style="margin:.2rem 0;color:var(--muted)">Fast estimates, professional sites, and results that hold up.</p>
        </div>
        <div class="stack">
          <a class="pill pill--solid" href="/quote.html">Request a Quote</a>
          <a class="iconbtn" href="tel:15136684382" aria-label="Call DuraHaus">
            <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M6.6 10.2c1.2 2.4 3.1 4.3 5.5 5.5l1.8-1.8c.3-.3.7-.4 1.1-.3 1 .3 2 .5 3 .5.6 0 1 .4 1 1v3.1c0 .6-.4 1-1 1C10.3 19.2 4.8 13.7 4.8 6.1c0-.6.4-1 1-1H9c.6 0 1 .4 1 1 0 1 .2 2 .5 3 .1.4 0 .8-.3 1.1l-1.6 2z"/></svg>
          </a>
        </div>
      </div>
    </section>

    <!-- Pre-footer: stamp + mini nav -->
    <div class="container prefooter">
      <div class="stampwrap">
        <img src="/assets/seal-white.PNG" alt="DuraHaus stamp (white)">
      </div>
      <nav class="menu" aria-label="Footer quick links">
        <a href="/services.html" class="pill">Services</a>
        <a href="/projects.html" class="pill">Projects</a>
        <a href="/about.html" class="pill">About</a>
        <a class="iconbtn" href="tel:15136684382" aria-label="Call DuraHaus">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M6.6 10.2c1.2 2.4 3.1 4.3 5.5 5.5l1.8-1.8c.3-.3.7-.4 1.1-.3 1 .3 2 .5 3 .5.6 0 1 .4 1 1v3.1c0 .6-.4 1-1 1C10.3 19.2 4.8 13.7 4.8 6.1c0-.6.4-1 1-1H9c.6 0 1 .4 1 1 0 1 .2 2 .5 3 .1.4 0 .8-.3 1.1l-1.6 2z"/></svg>
        </a>
        <a class="pill pill--solid" href="/quote.html">Get a Quote</a>
      </nav>
    </div>

    <!-- Contact strip (phone, email, socials) -->
    <section class="contactbar">
      <div class="container row">
        <a href="tel:+15136684382" aria-label="Call">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M6.6 10.2c1.2 2.4 3.1 4.3 5.5 5.5l1.8-1.8c.3-.3.7-.4 1.1-.3 1 .3 2 .5 3 .5.6 0 1 .4 1 1v3.1c0 .6-.4 1-1 1C10.3 19.2 4.8 13.7 4.8 6.1c0-.6.4-1 1-1H9c.6 0 1 .4 1 1 0 1 .2 2 .5 3 .1.4 0 .8-.3 1.1l-1.6 2z"/></svg>
          513-668-4382
        </a>
        <a href="mailto:durahaus.solutions@gmail.com" aria-label="Email">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4-8 5L4 8V6l8 5 8-5v2z"/></svg>
          durahaus.solutions@gmail.com
        </a>
        <a href="https://www.facebook.com/durahaus" target="_blank" rel="noopener" aria-label="Facebook">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M22 12a10 10 0 1 0-11.5 9.9v-7h-2v-3h2v-2.3c0-2 1.2-3.1 3-3.1.9 0 1.8.1 1.8.1v2h-1c-1 0-1.3.6-1.3 1.2V12h2.2l-.4 3h-1.8v7A10 10 0 0 0 22 12z"/></svg>
          Facebook
        </a>
        <a href="https://share.google/EBNrz9YGxu5CfbmpO" target="_blank" rel="noopener" aria-label="Google Business Profile">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 2a7 7 0 0 0-7 7c0 5.2 7 13 7 13s7-7.8 7-13a7 7 0 0 0-7-7zm0 9.5A2.5 2.5 0 1 1 12 6a2.5 2.5 0 0 1 0 5z"/></svg>
          Google
        </a>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer>
    <div class="container foot">
      <small>© <span id="y"></span> DuraHaus Painting & Construction. All rights reserved.</small>
    </div>
  </footer>

  <script>
    // Year
    document.getElementById('y').textContent = new Date().getFullYear();

    // Light/Dark toggle (remembers choice)
    (function(){
      const root=document.documentElement;
      const btn=document.getElementById('themeBtn');
      const saved=localStorage.getItem('dh-theme');
      if(saved) root.setAttribute('data-theme', saved);
      btn.textContent = (root.getAttribute('data-theme')==='light') ? '🌙' : '☀️';
      btn.addEventListener('click', ()=>{
        const cur=root.getAttribute('data-theme')||'dark';
        const next=cur==='dark'?'light':'dark';
        root.setAttribute('data-theme', next);
        localStorage.setItem('dh-theme', next);
        btn.textContent = next==='light' ? '🌙' : '☀️';
      });
    })();

    // Before/After slider
    (function(el){
      if(!el) return;
      const r=el.querySelector('input[type=range]'),
            after=el.querySelector('.after img'),
            h=el.querySelector('.handle');
      function update(v){ after.style.clipPath=`inset(0 0 0 ${v}%)`; h.style.left=v+'%'; }
      r.addEventListener('input', e=>update(e.target.value));
      r.addEventListener('keydown', e=>{
        const step=(e.shiftKey?10:2);
        if(e.key==='ArrowLeft'){ r.value=Math.max(0, r.value-step); r.dispatchEvent(new Event('input')); }
        if(e.key==='ArrowRight'){ r.value=Math.min(100, Number(r.value)+step); r.dispatchEvent(new Event('input')); }
      });
      update(50);
    })(document.getElementById('ba1'));

    /* === Color Studio: Smart Select (LAB flood fill) === */
    (function(){
      const PRESETS = {
        interior: {
          base: "/assets/stock-interior.webp",
          surfaces: [
            {key:"walls",   label:"Walls",   color:"#D9D9D9", strength:70},
            {key:"ceiling", label:"Ceiling", color:"#FFFFFF", strength:55},
            {key:"trim",    label:"Trim",    color:"#F2F2F2", strength:65},
            {key:"cabinets",label:"Cabinets",color:"#E6E6E6", strength:70},
            {key:"doors",   label:"Doors",   color:"#6B7A8F", strength:75},
          ]
        },
        exterior: {
          base: "/assets/stock-exterior.webp",
          surfaces: [
            {key:"siding",  label:"Siding",  color:"#C9CDD1", strength:70},
            {key:"fascia",  label:"Fascia / Soffits / Gables", color:"#EEEEEE", strength:70},
            {key:"trim",    label:"Trim",    color:"#EDEDED", strength:65},
            {key:"doors",   label:"Doors",   color:"#435B71", strength:80},
          ]
        }
      };
      const SWATCHES = ["#FFFFFF","#F5F5F5","#EDEDED","#D9D9D9","#C9CDD1","#B0B8BF","#8AA6C1","#6B7A8F","#435B71","#2F3E4A","#1D1F22"];

      const cvs = document.getElementById('caiView');
      const up = document.getElementById('caiUpload');
      const tabs = document.querySelectorAll('.cai-tab');
      const surfaceSel = document.getElementById('caiSurface');
      const tol = document.getElementById('caiTol');
      const feather = document.getElementById('caiFeather');
      const btnAdd = document.getElementById('caiAdd');
      const btnSub = document.getElementById('caiSubtract');
      const btnUndo = document.getElementById('caiUndo');
      const globalStrength = document.getElementById('caiGlobalStrength');
      const controls = document.getElementById('caiControls');

      let mode = 'interior';
      let baseImg = new Image();
      let userBaseURL = null;
      let w=0,h=0;
      let ctx = cvs.getContext('2d');
      let baseCanvas = document.createElement('canvas');
      let baseCtx = baseCanvas.getContext('2d');
      const layers = new Map(); // key -> {mask, mctx, history:ImageData[]}
      const settings = new Map(); // key -> {color,strength}
      let activeKey = 'walls';
      let addMode = true;

      function clamp(v,a,b){ return Math.max(a, Math.min(b,v)); }
      function rgb2xyz(r,g,b){
        r/=255; g/=255; b/=255;
        r = r>0.04045 ? ((r+0.055)/1.055)**2.4 : r/12.92;
        g = g>0.04045 ? ((g+0.055)/1.055)**2.4 : g/12.92;
        b = b>0.04045 ? ((b+0.055)/1.055)**2.4 : b/12.92;
        const x = (r*0.4124 + g*0.3576 + b*0.1805)/0.95047;
        const y = (r*0.2126 + g*0.7152 + b*0.0722)/1.00000;
        const z = (r*0.0193 + g*0.1192 + b*0.9505)/1.08883;
        return [x,y,z];
      }
      function xyz2lab(x,y,z){
        function f(t){ return t>0.008856 ? Math.cbrt(t) : (7.787*t + 16/116); }
        const fx=f(x), fy=f(y), fz=f(z);
        const L=116*fy-16, a=500*(fx-fy), b=200*(fy-fz);
        return [L,a,b];
      }
      function rgb2lab(r,g,b){ const [x,y,z]=rgb2xyz(r,g,b); return xyz2lab(x,y,z); }
      function deltaE(lab1, lab2){
        const dL = lab1[0]-lab2[0], da=lab1[1]-lab2[1], db=lab1[2]-lab2[2];
        return Math.sqrt(dL*dL+da*da+db*db);
      }

      function setMode(next){
        mode = next;
        tabs.forEach(t=>{
          const active = t.dataset.mode===mode;
          t.classList.toggle('is-active', active);
          t.setAttribute('aria-selected', active?'true':'false');
        });
        buildFromPreset();
      }

      function buildFromPreset(){
        layers.clear(); settings.clear(); controls.innerHTML="";
        const preset = PRESETS[mode];
        if(!userBaseURL){ baseImg.src = preset.base; }
        preset.surfaces.forEach(s=>{
          settings.set(s.key, {color:s.color, strength:s.strength});
          const row = document.createElement('div');
          row.className = 'cai-row';
          row.innerHTML = `
            <strong>${s.label}</strong>
            <input type="color" value="${s.color}" data-key="${s.key}" aria-label="${s.label} color">
            <label>Strength <input type="range" min="0" max="100" value="${s.strength}" data-strength="${s.key}"></label>
            <div class="cai-swatches">
              ${SWATCHES.map(c=>`<button class="cai-swatch" type="button" data-key="${s.key}" data-color="${c}" title="${c}" style="background:${c}"></button>`).join('')}
            </div>
          `;
          controls.appendChild(row);
        });
        surfaceSel.innerHTML = preset.surfaces.map(s=>`<option value="${s.key}">${s.label}</option>`).join('');
        activeKey = preset.surfaces[0].key;
        surfaceSel.value = activeKey;
        if (w && h) initMasks();
        render();
      }

      function initMasks(){
        settings.forEach((_, key)=>{
          const mask = document.createElement('canvas');
          mask.width = w; mask.height = h;
          const mctx = mask.getContext('2d');
          layers.set(key, {mask, mctx, history:[]});
        });
      }

      function fitCanvasTo(img){
        const maxW = cvs.parentElement.clientWidth;
        const ratio = img.width / img.height;
        const dispW = Math.min(maxW, img.width);
        const dispH = Math.round(dispW / ratio);
        w = img.width; h = img.height;
        cvs.width = dispW; cvs.height = dispH;
        baseCanvas.width = w; baseCanvas.height = h;
        baseCtx.drawImage(img, 0, 0, w, h);
        if(layers.size===0) initMasks();
        render();
      }

      function drawSurface(key){
        const L = layers.get(key);
        if(!L) return;
        const {mask} = L;
        const {color, strength} = settings.get(key);
        const temp = document.createElement('canvas');
        temp.width = w; temp.height = h;
        const tctx = temp.getContext('2d');
        tctx.fillStyle = color;
        tctx.globalAlpha = clamp((strength/100)*(globalStrength.value/100), 0, 1);
        tctx.fillRect(0,0,w,h);
        tctx.globalCompositeOperation = 'destination-in';
        tctx.drawImage(mask,0,0);
        ctx.save();
        ctx.globalCompositeOperation = 'multiply';
        ctx.drawImage(temp, 0, 0, w, h, 0, 0, cvs.width, cvs.height);
        ctx.restore();
      }

      function render(){
        ctx.clearRect(0,0,cvs.width,cvs.height);
        ctx.drawImage(baseCanvas, 0, 0, w, h, 0, 0, cvs.width, cvs.height);
        settings.forEach((_, key)=> drawSurface(key));
      }

      function selectAt(xDisp, yDisp){
        if(!w||!h) return;
        const scaleX = w / cvs.width;
        const scaleY = h / cvs.height;
        const x = Math.floor(xDisp * scaleX);
        const y = Math.floor(yDisp * scaleY);

        const src = baseCtx.getImageData(0,0,w,h);
        const data = src.data;
        const idx0 = (y*w + x)*4;
        const seed = [data[idx0], data[idx0+1], data[idx0+2]];
        const seedLab = rgb2lab(seed[0], seed[1], seed[2]);
        const thr = Number(tol.value);

        const stack = [[x,y]];
        const visited = new Uint8Array(w*h);
        const sel = new Uint8ClampedArray(w*h);
        const dirs = [[1,0],[-1,0],[0,1],[0,-1]];
        while(stack.length){
          const [cx,cy] = stack.pop();
          if(cx<0||cy<0||cx>=w||cy>=h) continue;
          const i = cy*w + cx;
          if(visited[i]) continue;
          visited[i]=1;
          const di = i*4;
          const lab = rgb2lab(data[di], data[di+1], data[di+2]);
          if(deltaE(lab, seedLab) <= thr){
            sel[i]=255;
            for(const d of dirs) stack.push([cx+d[0], cy+d[1]]);
          }
        }

        const f = Number(feather.value);
        let mask = sel;
        if(f>0){
          mask = boxBlur(mask, w, h, f);
        }

        const layer = layers.get(activeKey);
        snapshot(layer);
        const mimg = layer.mctx.getImageData(0,0,w,h);
        for(let i=0;i<w*h;i++){
          const a = mimg.data[i*4+3];
          const m = mask[i];
          mimg.data[i*4+3] = addMode ? clamp(a + m, 0, 255) : clamp(a - m, 0, 255);
        }
        layer.mctx.putImageData(mimg,0,0);
        render();
      }

      function boxBlur(mask, w, h, r){
        let out = mask.slice(0);
        const passes = Math.max(1, Math.min(3, Math.round(r/2)));
        for(let p=0;p<passes;p++){
          out = blur1D(out, w, h, Math.max(1,r));
          out = blur1D(out, h, w, Math.max(1,r), true);
        }
        return out;
      }
      function blur1D(buf, w, h, r, transpose=false){
        const out = new Uint8ClampedArray(w*h);
        const win = r*2+1;
        for(let y=0;y<h;y++){
          let sum=0;
          for(let x=0;x<win && x<w;x++){
            const xi = transpose ? (x*h + y) : (y*w + x);
            sum += buf[xi];
          }
          for(let x=0;x<w;x++){
            const li = x-r-1, ri = x+r;
            if(li>=0){
              const idx = transpose ? (li*h + y) : (y*w + li);
              sum -= buf[idx];
            }
            if(ri<w){
              const idx = transpose ? (ri*h + y) : (y*w + ri);
              sum += buf[idx];
            }
            const oi = transpose ? (x*h + y) : (y*w + x);
            out[oi] = Math.round(sum / Math.min(win, w));
          }
        }
        return out;
      }

      function snapshot(layer){
        try{
          const snap = layer.mctx.getImageData(0,0,w,h);
          layer.history.push(snap);
          if(layer.history.length>20) layer.history.shift();
        }catch(e){}
      }
      function undoLayer(key){
        const layer = layers.get(key);
        const last = layer.history.pop();
        if(last){
          layer.mctx.putImageData(last,0,0);
          render();
        }
      }

      cvs.addEventListener('click', (e)=>{
        const rect = cvs.getBoundingClientRect();
        const x = e.clientX - rect.left;
        const y = e.clientY - rect.top;
        selectAt(x,y);
      });
      document.addEventListener('keydown', (e)=>{
        if(e.key==='s' || e.key==='S'){ addMode=false; btnSub.ariaPressed="true"; btnAdd.ariaPressed="false"; }
        if(e.key==='a' || e.key==='A'){ addMode=true; btnAdd.ariaPressed="true"; btnSub.ariaPressed="false"; }
        if(e.key==='z' || e.key==='Z'){ undoLayer(activeKey); }
      });

      btnAdd.addEventListener('click', ()=>{ addMode=true; btnAdd.ariaPressed="true"; btnSub.ariaPressed="false"; });
      btnSub.addEventListener('click', ()=>{ addMode=false; btnSub.ariaPressed="true"; btnAdd.ariaPressed="false"; });
      btnUndo.addEventListener('click', ()=> undoLayer(activeKey));
      surfaceSel.addEventListener('change', ()=> activeKey = surfaceSel.value);
      globalStrength.addEventListener('input', render);

      controls.addEventListener('input', (e)=>{
        const colorEl = e.target.closest('input[type="color"]');
        const rngEl = e.target.closest('input[type="range"]');
        if(colorEl){
          const key = colorEl.dataset.key;
          settings.get(key).color = colorEl.value;
          render();
        }
        if(rngEl && rngEl.dataset.strength){
          const key = rngEl.dataset.strength;
          settings.get(key).strength = Number(rngEl.value);
          render();
        }
      });
      controls.addEventListener('click', (e)=>{
        const sw = e.target.closest('cai-swatch') || e.target.closest('.cai-swatch');
        if(sw){
          const key = sw.dataset.key, c = sw.dataset.color;
          const input = controls.querySelector(`input[type="color"][data-key="${key}"]`);
          input.value = c;
          settings.get(key).color = c;
          render();
        }
      });

      up.addEventListener('change', (e)=>{
        const f = e.target.files && e.target.files[0];
        if(!f) return;
        const url = URL.createObjectURL(f);
        userBaseURL = url;
        const img = new Image();
        img.onload = ()=>{
          baseImg = img;
          fitCanvasTo(baseImg);
          URL.revokeObjectURL(url);
        };
        img.src = url;
      });

      tabs.forEach(t=> t.addEventListener('click', ()=>{
        setMode(t.dataset.mode);
      }));

      function boot(){
        baseImg.crossOrigin = "anonymous";
        baseImg.onload = ()=>{ fitCanvasTo(baseImg); };
        baseImg.src = PRESETS[mode].base;
        buildFromPreset();
        window.addEventListener('resize', ()=>{
          if(!w||!h) return;
          fitCanvasTo(baseImg);
        });
      }
      boot();
    })();
  </script>
</body>
</html>
